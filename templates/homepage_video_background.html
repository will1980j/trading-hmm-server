<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Second Skies Trading - Homepage</title>
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/homepage.css') }}?v=2">
</head>
<body>
<!-- ========== FORCE DEBUG BANNER (z-index 999999) ========== -->
<div id="roadmap_force_debug" style="position:fixed;top:0;left:0;right:0;z-index:999999;background:#000;color:#fff;padding:10px 14px;font-size:13px">
HOMEPAGE_DEBUG: template=homepage_video_background.html |
roadmap_present={{ 'YES' if roadmap_snapshot else 'NO' }} |
phases={{ roadmap_snapshot|length if roadmap_snapshot else 0 }} |
stats_present={{ 'YES' if databento_stats else 'NO' }}
</div>

<!-- ========== FORCE ROADMAP CARD (z-index 999998) ========== -->
<div id="roadmap_force_card" style="position:relative;z-index:999998;margin-top:60px;margin-left:16px;max-width:860px;background:rgba(0,0,0,0.92);color:#fff;padding:16px;border-radius:14px;border:2px solid #4ade80;">
<h2 style="margin:0 0 10px 0;color:#4ade80;">Roadmap</h2>
{% if databento_stats %}
<div style="opacity:0.9;margin-bottom:10px;padding:8px;background:rgba(74,222,128,0.1);border-radius:8px;">
Databento MNQ 1m: <strong>{{ databento_stats.row_count }}</strong> bars |
{{ databento_stats.min_ts }} to {{ databento_stats.max_ts }} |
Latest: {{ databento_stats.latest_close }} @ {{ databento_stats.latest_ts }}
</div>
{% else %}
<div style="opacity:0.8;margin-bottom:10px;padding:8px;background:rgba(248,113,113,0.1);border-radius:8px;">
Databento stats unavailable
</div>
{% endif %}
{% if roadmap_snapshot %}
{% for pid, phase in roadmap_snapshot|dictsort %}
<div style="margin:12px 0;padding:10px;border:1px solid rgba(255,255,255,0.18);border-radius:12px;background:rgba(255,255,255,0.03);">
<div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;">
<strong style="color:#60a5fa;">{{ phase.name }}</strong>
<span style="color:#4ade80;">{{ phase.percent }}% ({{ phase.completed }}/{{ phase.modules }})</span>
</div>
<div style="opacity:0.85;margin:6px 0 8px 0;font-size:12px;">{{ phase.description }}</div>
<ul style="margin:0;padding-left:18px;font-size:12px;">
{% for m in phase.module_list %}
<li style="margin:2px 0;">{% if m.done %}DONE{% else %}TODO{% endif %} {{ m.title }}</li>
{% endfor %}
</ul>
</div>
{% endfor %}
{% else %}
<div style="color:#f87171;padding:10px;">Roadmap unavailable.</div>
{% if roadmap_error %}
<pre style="white-space:pre-wrap;opacity:0.9;margin-top:10px;padding:10px;background:rgba(248,113,113,0.1);border-radius:8px;">{{ roadmap_error }}</pre>
{% endif %}
{% endif %}
</div>
<!-- ========== END FORCE ROADMAP ========== -->


<!-- Background Video -->
<div id="videoContainer" class="video-container">
<video id="backgroundVideo" autoplay muted loop playsinline>
<source src="" type="video/mp4">
</video>
<div class="video-overlay"></div>
</div>

<!-- System Status Ribbon -->
<section class="status-ribbon">
<div class="status-item">
<span class="status-label">Session:</span>
<span class="status-value" id="statusSession">--</span>
</div>
<div class="status-item">
<span class="status-label">Signals Today:</span>
<span class="status-value" id="statusSignals">0</span>
</div>
<div class="status-item">
<span class="status-label">Last Signal:</span>
<span class="status-value" id="statusLastSignal">--</span>
</div>
<div class="status-item">
<span class="status-label">Webhook:</span>
<span class="status-value" id="statusWebhook">--</span>
</div>
</section>

<!-- Main 2-Column Layout -->
<main class="layout-grid">

<!-- LEFT COLUMN: ROADMAP -->
<aside class="roadmap-section">
<div class="roadmap-header">
<h2>Development Roadmap</h2>
<p>Platform evolution and feature development timeline</p>
</div>

<div class="roadmap-phases">
{% for phase_id, phase in roadmap %}
{# derive a status class based on percent complete #}
{% set status_class = 'active' if phase.percent > 0 else 'future' %}
{% set complete_class = 'phase-complete' if phase.percent == 100 else '' %}
<div class="roadmap-phase {{ status_class }} {{ complete_class }}">
<button class="phase-toggle" type="button">
<div class="phase-header condensed-phase-header">
<span class="condensed-phase-number">{{ phase_id }}</span>
<span class="condensed-phase-title">{{ phase.name }}</span>
<span class="condensed-phase-meta">({{ phase.modules }} modules â€¢ {{ phase.percent }}%)</span>
</div>
</button>
<div class="phase-details">
<p class="phase-details-text">{{ phase.description }}</p>
<div class="phase-modules">
{% for module in phase.module_list %}
<div class="phase-module-row">
<span class="phase-module-dot {% if module.done %}complete{% else %}incomplete{% endif %}"></span>
<span class="phase-module-name">{{ module.title }}</span>
</div>
{% endfor %}
</div>

{# Show Databento stats for Phase 0 #}
{% if phase_id == '0' and databento_stats %}
<div class="databento-stats-box" style="margin-top: 1rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 6px; font-size: 0.85rem;">
<div style="font-weight: 600; margin-bottom: 0.5rem; color: #4ade80;">ğŸ“Š Live Dataset Stats</div>
<div style="display: grid; grid-template-columns: auto 1fr; gap: 0.25rem 0.75rem; color: rgba(255,255,255,0.8);">
<span>Bars:</span><span style="font-family: 'Courier New', monospace;">{{ "{:,}".format(databento_stats.row_count) }}</span>
<span>Range:</span><span style="font-family: 'Courier New', monospace;">{{ databento_stats.min_ts }} â†’ {{ databento_stats.max_ts }}</span>
<span>Latest:</span><span style="font-family: 'Courier New', monospace;">{{ databento_stats.latest_ts }} @ ${{ "{:,.2f}".format(databento_stats.latest_close) }}</span>
</div>
</div>
{% elif phase_id == '0' and not databento_stats %}
<div class="databento-stats-box" style="margin-top: 1rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 6px; font-size: 0.85rem; color: rgba(255,255,255,0.6);">
<div style="font-weight: 600; margin-bottom: 0.5rem;">ğŸ“Š Dataset Stats</div>
<div>Stats unavailable (check API endpoint)</div>
</div>
{% endif %}

<div class="phase-progress-line">
<div class="phase-progress-line-fill" style="width: {{ phase.percent }}%;"></div>
</div>
</div>
</div>
{% endfor %}
</div>
</aside>

<!-- RIGHT COLUMN: WORKSPACE -->
<section class="workspace-column">

<section class="hero-section">
<h1 class="hero-title">Second Skies Trading</h1>
<p class="hero-subtitle">Advanced algorithmic trading with real-time signal processing</p>
</section>

<section class="workspace-grid">
{% for module in [
('ğŸ¯', 'Main Dashboard', 'H1.2 â€” Central command center for system monitoring and navigation', '/main-dashboard', 'H1.2', 'active', 'H1-2'),
('ğŸ“Š', 'Automated Signals Engine', 'H1.1 â€” Core automated signals engine and lifecycle dashboard', '/automated-signals', 'H1.1 CORE', 'active', 'H1-1A'),
('â°', 'Time Analysis', 'H1.3 â€” Completed temporal pattern and session performance analytics', '/time-analysis', 'H1.3 COMPLETE', 'active', 'H1-3'),
('ğŸ’°', 'Financial Summary', 'H1.5 â€” Performance and financial reporting', '/financial-summary', 'H1.5', 'active', 'H1-5'),
('ğŸ“Š', 'Reporting Hub', 'H1.6 â€” Advanced reporting and business intelligence', '/reporting-hub', 'H1.6', 'active', 'H1-6'),
('âš¡', 'Strategy Optimizer', 'H2 â€” Advanced optimization and backtesting engine', '/strategy-optimizer', 'H2', 'active', 'H2-18'),
('ğŸ“ˆ', 'Strategy Compare', 'H2 â€” Compare and analyze multiple trading strategies', '/strategy-comparison', 'H2', 'active', 'H2-19'),
('ğŸ§ ', 'ML Intelligence Hub', 'H5 â€” Machine learning insights and predictive analytics (future ML layer)', '/ml-dashboard', 'H5 FUTURE', 'future', 'H5-ML'),
('ğŸ“‹', 'Trade Manager', 'H2 â€” Trade execution and position management', '/trade-manager', 'H2', 'active', 'H2-TRADE'),
('ğŸ’¼', 'Prop Portfolio', 'H8 â€” Prop firm portfolio management and compliance', '/prop-portfolio', 'H8', 'active', 'H8-PROP'),
('ğŸ§­', 'AI Business Advisor', 'H9 â€” AI-driven capital allocation & business intelligence (coming soon)', '/ai-business-advisor', 'H9 FUTURE', 'future', 'H9-25')
] %}
<div class="workspace-card workspace-card--{{ module[5] }}" data-module-code="{{ module[6] }}">
<div class="card-header">
<div class="card-icon">{{ module[0] }}</div>
<h3>{{ module[1] }}</h3>
<span class="card-status">{{ module[4] }}</span>
</div>
<p class="card-description">{{ module[2] }}</p>
{% if module[5] == 'active' %}
<a href="{{ module[3] }}" class="card-link">Launch</a>
{% elif module[5] == 'future' %}
<button type="button" class="card-link card-link--ghost" onclick="window.location.href='/roadmap'">View Roadmap</button>
{% else %}
<span class="card-link card-link--disabled">In Development</span>
{% endif %}
</div>
{% endfor %}
</section>

</section>

</main>

<!-- *** DO NOT MODIFY THE EXISTING VIDEO ROTATION JAVASCRIPT BELOW THIS COMMENT *** -->
<script src="{{ url_for('static', filename='js/homepage.js') }}"></script>

</body>
</html>
