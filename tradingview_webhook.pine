//@version=5
indicator("AI Trading Webhook", overlay=true)

// Input for webhook URL
webhook_url = input.string("http://your-server.com/api/tradingview-webhook", "Webhook URL")

// Your existing FVG/ICT logic here
// Example: Simple moving average crossover
fast_ma = ta.sma(close, 9)
slow_ma = ta.sma(close, 21)

// Signal detection
long_signal = ta.crossover(fast_ma, slow_ma)
short_signal = ta.crossunder(fast_ma, slow_ma)

// Plot signals
plotshape(long_signal, "Long", shape.triangleup, location.belowbar, color.green, size=size.small)
plotshape(short_signal, "Short", shape.triangledown, location.abovebar, color.red, size=size.small)

// Webhook alerts
if long_signal
    alert('{"symbol": "' + syminfo.ticker + '", "price": ' + str.tostring(close) + ', "action": "BUY", "message": "Long signal detected", "timestamp": "' + str.tostring(time) + '"}', alert.freq_once_per_bar)

if short_signal
    alert('{"symbol": "' + syminfo.ticker + '", "price": ' + str.tostring(close) + ', "action": "SELL", "message": "Short signal detected", "timestamp": "' + str.tostring(time) + '"}', alert.freq_once_per_bar)

// Display current analysis
var table info_table = table.new(position.top_right, 2, 4, bgcolor=color.black, border_width=1)
if barstate.islast
    table.cell(info_table, 0, 0, "Symbol", text_color=color.white)
    table.cell(info_table, 1, 0, syminfo.ticker, text_color=color.yellow)
    table.cell(info_table, 0, 1, "Price", text_color=color.white)
    table.cell(info_table, 1, 1, str.tostring(close, "#.##"), text_color=color.yellow)
    table.cell(info_table, 0, 2, "Fast MA", text_color=color.white)
    table.cell(info_table, 1, 2, str.tostring(fast_ma, "#.##"), text_color=color.blue)
    table.cell(info_table, 0, 3, "Slow MA", text_color=color.white)
    table.cell(info_table, 1, 3, str.tostring(slow_ma, "#.##"), text_color=color.orange)