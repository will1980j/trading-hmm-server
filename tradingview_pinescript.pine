// TradingView Pine Script for Webhook Integration
//@version=5
strategy("Auto Trade Sync", overlay=true)

// Strategy parameters
rsi_length = input.int(14, "RSI Length")
rsi_overbought = input.int(70, "RSI Overbought")
rsi_oversold = input.int(30, "RSI Oversold")

// Webhook URL (replace with your Railway app URL)
webhook_url = "https://web-production-cd33.up.railway.app/api/tradingview-webhook"

// Calculate RSI
rsi = ta.rsi(close, rsi_length)

// Entry conditions
long_condition = ta.crossover(rsi, rsi_oversold)
short_condition = ta.crossunder(rsi, rsi_overbought)

// Execute trades
if long_condition
    strategy.entry("Long", strategy.long)
    // Send webhook alert
    alert('{"action": "BUY", "ticker": "' + syminfo.ticker + '", "price": ' + str.tostring(close) + ', "quantity": 1, "time": "' + str.tostring(time) + '", "strategy": "RSI", "message": "RSI Oversold"}', alert.freq_once_per_bar)

if short_condition
    strategy.entry("Short", strategy.short)
    // Send webhook alert  
    alert('{"action": "SELL", "ticker": "' + syminfo.ticker + '", "price": ' + str.tostring(close) + ', "quantity": 1, "time": "' + str.tostring(time) + '", "strategy": "RSI", "message": "RSI Overbought"}', alert.freq_once_per_bar)

// Plot RSI
plot(rsi, "RSI", color=color.blue)
hline(rsi_overbought, "Overbought", color=color.red)
hline(rsi_oversold, "Oversold", color=color.green)